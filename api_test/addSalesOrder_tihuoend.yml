name: 销售-新增待开提单的销售订单
base_url: https://api.zhaogangtest.com

variables:
  orderItemDetailId: 1
  saleOrderId: 1
  salesOrderNo: 1
  dispatchId: 1
  dispatchNo: 1
  id: 1
  expected_status_code: 200
  token: $token
request:
  verify: False
  url: /web.api
  method: POST
  params:
    _sm: md5
    _ft: json
    _ts: 1602836872116
    param: '{"salesDeliveryOrderInfo":{"ourCompanyId":320,"warehouseId":1371,"customerCompanyId":20402,
                                           "salesOrderNo":"$salesOrderNo","salesOrderId":$saleOrderId,
                                           "dispatchOrderNo":"$dispatchNo","dispatchOrderId":$dispatchId,
                                           "sourceOrderNo":"","sourceOrderType":0,"customerCompanyName":"山杏往来公司",
                                           "warehouseName":"西部森林开发仓库","ourCompanyName":"蚂蚁森林公司",
                                           "settlementStatus":0,"businessMode":2,
                                           "deliveryDate":"2020-10-21T06:36:35.333Z"},
                 "listSalesDeliveryOrderItemDetail":[{"salesOrderId":$saleOrderId,
                                                      "purchaseHasSettlement":false,
                                                      "supplierId":20402,"itemTitle":"三级螺纹钢",
                                                      "quantityUnit":2,"steelMill":"鸿泰","packageNo":"",
                                                      "dispatchId":$dispatchId,"realDispatchNum":1,"id":0,
                                                      "singleWeight":120000,"orderItemDetailId":$orderItemDetailId,
                                                      "openWeight":0,"supplierName":"山杏往来公司","valuationUnit":1,
                                                      "itemUnitWay":2,"dispatchNo":"$dispatchNo","batchNo":"",
                                                      "dispatchNum":1,"openNum":0,"specification":"22*12",
                                                      "realDispatchWeight":120000,"itemId":568338,
                                                      "taxRate":"0.1300","material":"HRB400",
                                                      "dispatchWeight":120000,"weightUnit":1,
                                                      "dispatchOrderItemDetailId":$id,"itemBatchNo":1}]}'

    _aid: 500
    _tk: $token
    _uid: 800008501
    _tenantid: 320004630
    _domid: 2000
    _mt: saasmanager.service.saveSalesDeliveryOrder

setup_hooks:
  - ${generate_sig($request)}

tearDown_hooks:
  - ${timesleep()}


validate:
  - eq: ["status_code", $expected_status_code]
  - eq: [content.stat.stateList.0.msg, 'SUCCESS']

